<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Posttest Jaringan - Cyber Edition</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #000; overflow-x: hidden; color: #f1f5f9; font-family: sans-serif; }
    .fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    
    .glass-effect { backdrop-filter: blur(10px); background-color: rgba(30, 41, 59, 0.9); border: 1px solid rgba(16, 185, 129, 0.3); } /* Green tint for Posttest */
    .option-btn { transition: all 0.3s; cursor: pointer; position: relative; overflow: hidden; }
    .option-btn:hover:not(:disabled) { transform: translateX(5px); background-color: rgba(16, 185, 129, 0.2); border-color: #10b981; }

    /* Warna Koreksi */
    .correct { background-color: #059669 !important; border-color: #34d399 !important; color: white !important; box-shadow: 0 0 15px #059669; }
    .incorrect { background-color: #b91c1c !important; border-color: #f87171 !important; color: white !important; opacity: 0.7; }
    
    #matrixCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; opacity: 0.2; pointer-events: none; }
    .audio-control { position: fixed; bottom: 20px; right: 20px; z-index: 100; background: rgba(0,0,0,0.7); border: 1px solid #10b981; color: white; padding: 10px; border-radius: 50%; cursor: pointer; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
  </style>
</head>
<body class="w-full min-h-screen flex items-center justify-center p-4">

  <canvas id="matrixCanvas"></canvas>
  <button id="audioToggle" class="audio-control" onclick="toggleAudio()">üîä</button>

  <div id="app" class="w-full max-w-4xl relative z-10"></div>

  <script>
    /* --- AUDIO SYSTEM (Sama, tapi BGM sedikit lebih upbeat/tense) --- */
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    let audioCtx = new AudioContext();
    let isMuted = false;
    let bgmInterval = null;

    function playTone(freq, type, duration) {
        if (isMuted) return;
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
        osc.type = type; osc.frequency.value = freq;
        gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(); osc.stop(audioCtx.currentTime + duration);
    }
    
    const SFX = {
        click: () => playTone(800, 'sine', 0.1),
        correct: () => [600, 800, 1000].forEach((f, i) => setTimeout(() => playTone(f, 'sine', 0.1), i*100)),
        wrong: () => [200, 100].forEach((f, i) => setTimeout(() => playTone(f, 'sawtooth', 0.2), i*100)),
        win: () => [523, 659, 783, 1046].forEach((f, i) => setTimeout(() => playTone(f, 'square', 0.3), i*150))
    };

    function startBGM() {
        if(isMuted) return;
        const playChord = () => {
            if(isMuted) return;
            [220, 261, 329].forEach(f => { 
                const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
                o.type = 'triangle'; o.frequency.value = f;
                g.gain.setValueAtTime(0, audioCtx.currentTime);
                g.gain.linearRampToValueAtTime(0.02, audioCtx.currentTime + 1);
                g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 4);
                o.connect(g); g.connect(audioCtx.destination);
                o.start(); o.stop(audioCtx.currentTime + 4);
            });
        };
        playChord();
        bgmInterval = setInterval(playChord, 3800);
    }

    function toggleAudio() {
        isMuted = !isMuted;
        document.getElementById('audioToggle').innerText = isMuted ? 'üîá' : 'üîä';
        if(!isMuted) { audioCtx.resume(); startBGM(); } 
        else { clearInterval(bgmInterval); }
    }

    /* --- MATRIX RAIN --- */
    const canvas = document.getElementById('matrixCanvas'), ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    const cols = canvas.width/14, drops = Array(Math.floor(cols)).fill(1);
    function drawMatrix() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.05)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#0F0'; ctx.font = '14px monospace';
        drops.forEach((y, i) => {
            const text = '01NET'[Math.floor(Math.random()*5)];
            ctx.fillText(text, i*14, y*14);
            if(y*14 > canvas.height && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        });
        requestAnimationFrame(drawMatrix);
    }
    drawMatrix();

    /* --- DATA SOAL POSTTEST (30 Soal) --- */
    // Konsep SAMA dengan Pretest, tapi kalimat berbeda.
    const posttestData = [
        { q: "Alamat IPv4 terdiri dari berapa bit?", opt: ["16 bit", "32 bit", "64 bit", "128 bit", "256 bit"], c: 1, exp: "IPv4 menggunakan 32 bit bilangan biner." },
        { q: "Apa nama alamat IP yang di-setting secara tetap dan tidak akan berubah?", opt: ["IP Dynamic", "IP DHCP", "IP Static", "IP Alias", "IP Random"], c: 2, exp: "Static IP adalah alamat yang dikonfigurasi manual agar tidak berubah." },
        { q: "Range 1.0.0.0 hingga 126.255.255.255 termasuk dalam IP kelas?", opt: ["Kelas A", "Kelas B", "Kelas C", "Kelas D", "Kelas E"], c: 0, exp: "Kelas A memiliki range oktet pertama 1-126." },
        { q: "Teknologi apa yang menerjemahkan IP Private menjadi IP Public?", opt: ["VPN", "NAT", "DNS", "DHCP", "Firewall"], c: 1, exp: "NAT (Network Address Translation) memungkinkan IP Private akses internet via satu IP Public." },
        { q: "Pengiriman paket dari satu sumber ke semua tujuan dalam network disebut?", opt: ["Unicast", "Anycast", "Multicast", "Broadcast", "Simplex"], c: 3, exp: "Broadcast adalah komunikasi 'one to all'." },
        { q: "Panjang total alamat IPv6 adalah?", opt: ["32 bit", "64 bit", "128 bit", "256 bit", "1024 bit"], c: 2, exp: "IPv6 memiliki panjang 128 bit untuk mengatasi kehabisan alamat IPv4." },
        { q: "Alamat IPv6 direpresentasikan dalam format?", opt: ["Desimal", "Biner", "Oktaf", "Heksadesimal", "Alfanumerik"], c: 3, exp: "IPv6 ditulis dalam 8 grup 4 digit heksadesimal." },
        { q: "Alamat IP 192.168.1.1 adalah contoh dari?", opt: ["IP Public Kelas C", "IP Private Kelas C", "IP Public Kelas A", "IP Private Kelas A", "IP Loopback"], c: 1, exp: "192.168.x.x adalah blok Private Address untuk Kelas C." },
        { q: "Layanan server yang mendistribusikan IP secara otomatis adalah?", opt: ["WEB Server", "DNS Server", "DHCP Server", "FTP Server", "Mail Server"], c: 2, exp: "DHCP (Dynamic Host Configuration Protocol) memberikan IP otomatis." },
        { q: "Localhost pada IPv4 direpresentasikan dengan alamat?", opt: ["192.168.1.1", "127.0.0.1", "0.0.0.0", "255.255.255.0", "10.0.0.1"], c: 1, exp: "127.0.0.1 adalah alamat loopback standar IPv4." },
        { q: "Kelas C memiliki range oktet pertama dari?", opt: ["1-127", "128-191", "192-223", "224-239", "240-254"], c: 2, exp: "Kelas C dimulai dari 192 hingga 223." },
        { q: "Agar sebuah web server bisa diakses oleh siapa saja di internet, ia membutuhkan?", opt: ["IP Private", "IP Local", "IP Public", "IP Protected", "IP Hidden"], c: 2, exp: "IP Public adalah alamat yang dapat dirutekan di jaringan internet global." },
        { q: "Metode pengiriman ke sekumpulan host tertentu (grup) disebut?", opt: ["Unicast", "Multicast", "Broadcast", "Anycast", "Unicasting"], c: 1, exp: "Multicast adalah komunikasi 'one to many' (grup spesifik)." },
        { q: "Subnet mask 255.255.255.0 sama dengan prefix?", opt: ["/8", "/16", "/24", "/32", "/64"], c: 2, exp: "/24 berarti 24 bit network, yang setara dengan 255.255.255.0." },
        { q: "Loopback address pada IPv6 adalah?", opt: ["127.0.0.1", "::1", "fe80::", "2001::", "::"], c: 1, exp: "::1 adalah notasi heksadesimal untuk localhost IPv6." },
        { q: "IP yang diberikan otomatis oleh OS Windows saat DHCP gagal (169.254.x.x) disebut?", opt: ["APIPA", "Static", "DHCP", "Reserved", "Public"], c: 0, exp: "APIPA (Automatic Private IP Addressing) menggunakan range 169.254.x.x." },
        { q: "Range IP 224.0.0.0 sampai 239.255.255.255 adalah Kelas?", opt: ["A", "B", "C", "D", "E"], c: 3, exp: "Kelas D dicadangkan khusus untuk Multicasting." },
        { q: "Fitur keamanan apa yang sudah menjadi standar bawaan di IPv6?", opt: ["SSL", "IPSec", "TLS", "SSH", "WEP"], c: 1, exp: "IPSec (Internet Protocol Security) wajib didukung di IPv6." },
        { q: "Dua komponen utama dalam struktur IP address adalah?", opt: ["Server & Client", "Network ID & Host ID", "Public & Private", "Source & Destination", "Bit & Byte"], c: 1, exp: "IP terdiri dari Network ID (identitas jaringan) dan Host ID (identitas perangkat)." },
        { q: "Untuk menghubungkan dua jaringan dengan Network ID berbeda, dibutuhkan alat?", opt: ["Switch", "Hub", "Router", "Bridge", "Access Point"], c: 2, exp: "Router berfungsi merutekan paket antar network yang berbeda." },
        { q: "Pemisah antar oktet dalam IPv4 adalah?", opt: ["Titik (.)", "Koma (,)", "Titik Dua (:)", "Strip (-)", "Garis Miring (/)"], c: 0, exp: "IPv4 menggunakan dot-decimal notation (contoh: 192.168.1.1)." },
        { q: "Berapakah nilai desimal dari bilangan heksadesimal 'A'?", opt: ["9", "10", "11", "12", "15"], c: 1, exp: "A=10, B=11, C=12, D=13, E=14, F=15." },
        { q: "Apa sebutan untuk IP yang diberikan server DHCP dan bisa berubah sewaktu-waktu?", opt: ["Static", "Dynamic", "Manual", "Fixed", "Permanent"], c: 1, exp: "Dynamic IP berubah-ubah sesuai masa sewa (lease time) DHCP." },
        { q: "Oktet pertama 128 - 191 adalah ciri dari IP Kelas?", opt: ["A", "B", "C", "D", "E"], c: 1, exp: "Kelas B memiliki range 128 hingga 191." },
        { q: "Pengiriman data dari satu komputer ke satu komputer lain disebut?", opt: ["Unicast", "Multicast", "Broadcast", "Anycast", "Omnicast"], c: 0, exp: "Unicast adalah komunikasi 'point-to-point' atau 'one-to-one'." },
        { q: "Pada IPv6, protokol apa yang menggantikan fungsi ARP?", opt: ["RARP", "NDP", "ICMP", "TCP", "UDP"], c: 1, exp: "NDP (Neighbor Discovery Protocol) digunakan IPv6 untuk menemukan alamat MAC tetangga." },
        { q: "255.0.0.0 adalah subnet mask default untuk Kelas?", opt: ["A", "B", "C", "D", "E"], c: 0, exp: "Kelas A secara default menggunakan /8 atau 255.0.0.0." },
        { q: "Alamat IP 'Unknown' atau rute default sering ditulis sebagai?", opt: ["127.0.0.1", "0.0.0.0", "255.255.255.255", "1.1.1.1", "10.0.0.1"], c: 1, exp: "0.0.0.0 merujuk pada 'semua alamat' atau rute default." },
        { q: "Teknologi yang memungkinkan perangkat menggunakan IPv4 dan IPv6 bersamaan adalah?", opt: ["Tunneling", "Dual Stack", "Translation", "NAT64", "Proxy"], c: 1, exp: "Dual Stack menjalankan kedua protokol IP secara paralel." },
        { q: "Dalam subnet 192.168.1.0/24, alamat 192.168.1.255 berfungsi sebagai?", opt: ["Network ID", "Gateway", "Host Pertama", "Broadcast Address", "DNS"], c: 3, exp: "Alamat terakhir dalam subnet digunakan untuk Broadcast." }
    ];

    let currentQ = 0;
    let score = 0;
    let isFinished = false;
    let hasAnswered = false;

    /* --- RENDER LOGIC --- */
    function renderApp() {
        const app = document.getElementById('app');

        if (!isFinished) {
            const q = posttestData[currentQ];
            app.innerHTML = `
                <div class="glass-effect p-8 rounded-2xl border border-green-500/30 fade-in shadow-2xl">
                    <div class="flex justify-between items-center mb-6 border-b border-green-800 pb-4">
                        <h2 class="text-3xl font-bold text-green-400 tracking-wider">POST-TEST</h2>
                        <div class="text-green-300 font-mono text-xl">Soal ${currentQ + 1} / ${posttestData.length}</div>
                    </div>

                    <p class="text-xl mb-8 font-medium leading-relaxed">${q.q}</p>

                    <div class="space-y-3">
                        ${q.opt.map((opt, i) => `
                            <button id="btn-${i}" onclick="handleAnswer(${i})" class="option-btn w-full text-left p-4 rounded-xl bg-slate-800 border border-slate-600 hover:bg-slate-700 transition-all flex items-center">
                                <span class="w-8 h-8 rounded-full bg-slate-900 text-green-400 flex items-center justify-center mr-4 font-bold border border-slate-700">${String.fromCharCode(65+i)}</span>
                                <span class="text-lg">${opt}</span>
                            </button>
                        `).join('')}
                    </div>

                    <div id="explanationBox" class="hidden mt-6 bg-slate-900/90 p-6 rounded-xl border-l-4 border-green-500 fade-in">
                        <div class="font-bold text-green-400 mb-2 text-lg">Pembahasan:</div>
                        <p class="text-gray-300 mb-4">${q.exp}</p>
                        <button onclick="nextQuestion()" class="w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg shadow-lg transition-all">
                            Lanjut ke Soal Berikutnya ‚û°Ô∏è
                        </button>
                    </div>
                </div>
            `;
        } else {
            // HASIL AKHIR
            app.innerHTML = `
                <div class="glass-effect p-10 rounded-2xl border-2 border-green-500 fade-in text-center max-w-2xl mx-auto">
                    <div class="text-6xl mb-6">üèÜ</div>
                    <h1 class="text-4xl font-bold text-white mb-2">Post-Test Selesai</h1>
                    <p class="text-gray-400 mb-8">Berikut adalah hasil evaluasi akhir Anda.</p>
                    
                    <div class="bg-slate-900/80 p-8 rounded-xl border border-green-700 mb-8">
                        <p class="text-sm text-gray-400 uppercase tracking-widest mb-2">Skor Akhir</p>
                        <div class="text-7xl font-bold text-green-500 mb-2">${score} <span class="text-3xl text-gray-600">/ 30</span></div>
                    </div>

                    <button onclick="window.location.reload()" class="px-8 py-3 rounded-xl bg-gray-700 hover:bg-gray-600 text-white font-bold transition-all border border-gray-500">
                        Ulangi Post-Test
                    </button>
                </div>
            `;
        }
    }

    function handleAnswer(selectedIndex) {
        if(hasAnswered) return;
        hasAnswered = true;
        
        const q = posttestData[currentQ];
        const correctIndex = q.c;

        // Logika Benar/Salah + Warna
        if (selectedIndex === correctIndex) {
            score++;
            SFX.correct();
            document.getElementById(`btn-${selectedIndex}`).classList.add('correct');
        } else {
            SFX.wrong();
            document.getElementById(`btn-${selectedIndex}`).classList.add('incorrect');
            // Tunjukkan yang benar
            document.getElementById(`btn-${correctIndex}`).classList.add('correct');
        }

        // Tampilkan Penjelasan
        document.getElementById('explanationBox').classList.remove('hidden');

        // Matikan semua tombol
        const btns = document.querySelectorAll('.option-btn');
        btns.forEach(btn => btn.disabled = true);
    }

    function nextQuestion() {
        SFX.click();
        currentQ++;
        hasAnswered = false;
        if (currentQ >= posttestData.length) {
            isFinished = true;
            SFX.win();
        }
        renderApp();
    }

    // Init
    renderApp();
  </script>
</body>
</html>